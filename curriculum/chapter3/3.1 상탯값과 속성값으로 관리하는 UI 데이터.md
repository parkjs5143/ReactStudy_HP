# 3.1 상탯값과 속성값으로 관리하는 UI 데이터

기록일: 2022년 2월 27일
상태: 중요하지만 헷갈리는 리액트 개념
장: 3.1장

# 상탯값과 속성값으로 관리하는 UI 데이터

UI 데이터 : 컴포넌트 내부에서 관리되는 상탯값, 부모 컴포넌트에서 내려주는 속성값으로 구성

이는 리덕스 같이 전역 데이터를 관리해주는 라이브러리를 사용할 때 도 마찬가지.

UI 데이터가 변경될 때 마다 화면을 다시 그려야 하는데, 리액트는 이를 컴포넌트 함수를 통해 자동으로 갱신해준다.

만약 리액트와 같은 UI 라이브러리를 사용하지 않으면 돔요소를 직접 수정해야 하므로 비즈니스 로직과 UI를 수정하는 코드가 뒤섞여 복잡해짐.

---

# 리액트를 사용한 코드의 특징

UI 라이브러리를 사용하지 않은 코드는 UI 를 업데이트하는 코드와 비즈니스 로직이 뒤섞여있다. 

리액트를 사용한 코드는 두 코드가 분리되어 있다.

**명령형(imperative) 프로그래밍** : UI 라이브러리를 사용하지 않은 코드

**선언형(declarative) 프로그래밍** : 리액트와 같이 UI 라이브러리를 사용한 코드

⇒ 선언형 프로그래밍이 추상화 단계가 더 높다. 따라서 비즈니스 로직에 더 집중할 수 있음.

---

# 컴포넌트의 속성값과 상태값

### 속성값과 상탯값으로 관리하는 UI 데이터

- 상탯값 : 해당 컴포넌트가 관리하는 데이터
- 속성값 : 부모 컴포넌트로부터 전달받는 데이터.

UI 데이터를 상탯값과 속성값으로 관리하지 않으면 UI데이터가 변경돼도 화면이 갱싱되지 않을 수 있음.

상탯값을 관리하기 위해 useState 훅을 사용함. 다음과 같이 사용.

```jsx
import {useState} from ‘react’;
const [state, setState] = useState('초깃값');
```

useState 훅의 인자는 초깃값을 의미

useState는 배열을 반환한다.

첫번째 원소는 상탯값, 두번째 원소는 상탯값 변경 함수이다.

setState 함수가 호출되면 상탯값을 변경하고 해당 컴포넌트를 리렌더링한다.

속성값을 사용하기 위해 부모 컴포넌트로부터 데이터를 전달받는다.

```jsx
// 부모컴포넌트에서 사용되는 자식 컴포넌트
function Title(props) {
	return <p>{props.title}</p>;
}

// 부모 컴포넌트
function Todo(){
	const [count, setCount] = useState(0);
	function onClick() {
		setCount(count + 1);
	}
	return (
		<div>
			<Title title={`현재 카운트: ${count}`} />
			<button onClick={onClick}>증가</button>
		</div>
	);
}
```

Title 컴포넌트 부모 컴포넌트로부터 title 이라는 속성값을 받는다.

Title 컴포넌트는 부모 컴포넌트가 렌더링될 때마다 같이 렌더링된다.

따라서 위 코드에서 count 값이 변경될 때 마다 같이 렌더링된다.

만약, title 속성값이 변경될 때만 렌더링되길 원한다면 React.memo 를 사용하면 된다.

⇒ 부모컴포넌트의 count 상탯값이 변경될 때 말고도 리렌더링되는 경우가 발생할 수도 있기 때문에, count 상탯값이 변경될 때만 Tilte 컴포넌트가 렌더링 되게 하기 위해서 사용.

```jsx
function Title(props) {
	return <p>{props.title}</p>;
}
export default React.memo(Title);
```

**React.memo(component) : memo 함수의 인수로 컴포넌트를 입력하면, 해당 컴포넌트의 속성값이 변경되는 경우에만 렌더링된다.**

같은 컴포넌트를 여러 번 사용할 경우 각 컴포넌트는 상탯값을 위한 자신만의 메모리 공간을 가짐. 따라서 각 상탯값이 따로 관리됨.

### 불변 객체로 관리하는 속성값과 상탯값

속성값은 불변(immutable)변수이지만, 상탯값은 불변 변수가 아님.

하지만 상탯값도 불변 변수로 관리하는게 좋다.

- 속성값은 값을 바꾸려고 하면 에러발생, 따라서 해당 속성값을 관리하는 컴포넌트에서 상탯값 변경함수를 이용해 수정해야한다.
- 반면, 상탯값은 직접 수정이 가능하다.
    
    하지만 상탯값으로 객체를 사용할 경우, 객체의 속성값만을 수정했을 때, 객체의 참조값은 그대로이기 때문에 변경 사항이 없다고 판단한다.
    

### 컴포넌트 함수의 반환값

1. 컴포넌트와 html에 정의된 거의 모든 태그
2. 문자열과 숫자
3. 배열 (각 요소는 key 속성값을 갖고 있어야만 함.( [key 속성값](https://reactjs-kr.firebaseapp.com/docs/lists-and-keys.html) : React가 어떤 아이템이 바뀌었는 지, 혹은 추가되었는 지, 혹은 삭제되었는 지를 인식하는 데 도움을 줍니다.)
4. 프래그먼트(fragment) : <React.Fragment></React.Fragment>를 사용하면 배열을 사용하지 않고도 여러 요소를 표현할 수 있다. 따라서 key 속성값을 부여하지 않아도 됨.
5. 프래그먼트를 <></>로 축약해서 사용하면 바벨이 알아서 변환해줌.
6. null 도는 boolean 을 반환하면 아무것도 렌더링하지 않음.
7. 리액트 포털을 사용하면 컴포넌트의 현재 위치와는 상관없이 특정 돔 요소에 렌더링 가능.
    
    `ReactDOM.createPortal(child, container)`
    
    - 첫 번째 인자(`child`)는 엘리먼트, 문자열, 혹은 fragment와 같은 어떤 종류이든 [렌더링할 수 있는 React 자식](https://ko.reactjs.org/docs/react-component.html#render)
    - 두 번째 인자(`container`)는 DOM 엘리먼트.